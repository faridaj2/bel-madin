<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bel Madin</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.0/dist/cdn.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }

        .bg-orange {
            background-color: #EE9322;
            height: 50vh;
        }

        .text-color-black {
            color: #004225;
        }

        .btn-outline-orange {
            outline: solid 1px #EE9322;
            color: #E25E3E;
            background-color: white;
        }

        .btn-outline-orange:focus {
            background-color: #EE9322;
            outline: solid 1px #EE9322;
            color: white;
        }
    </style>
</head>

<body>
    <div class="loading" id="loading">
        <div class="loader"></div>
    </div>
    <div class="container" style="max-width: 400px;">

        <div class="row">
            <div
                class="col bg-new p-4 d-flex align-items-center justify-content-center flex-column text-white bb-bottom text-center">
                <h1>Aplikasi Bel Diniyah</h1>
                <p class="text-sm" style="font-size: 0.9rem;">PP. Darussalam Blokagung 2</p>
                <div class="bg-white rounded-circle shadow" style="transform: translateY(px);">
                    <img src="logo.png" style="height: 100px; width: 100px; transform: translate(-2px, -3px);" alt="">
                </div>
            </div>
        </div>

        <div class="row my-5 mx-3" x-data="app">
            <!-- <div class="d-flex flex-column gap-3">
                <button class="btn btn-primary d-flex justify-content-center align-items-center gap-2"
                    @click="sirene"><ion-icon name="notifications-outline"></ion-icon>
                    Sirene</button>
                <button class="btn btn-primary d-flex justify-content-center align-items-center gap-2"
                    @click="belPersiapan"><ion-icon name="notifications-outline"></ion-icon>
                    Bel
                    Persiapan</button>
                <button class="btn btn-primary d-flex justify-content-center align-items-center gap-2"
                    @click="belJamPertama"><ion-icon name="notifications-outline"></ion-icon>
                    Bel
                    Masuk Jam Pertama</button>
                <button class="btn btn-primary d-flex justify-content-center align-items-center gap-2"
                    @click="belJamKedua"><ion-icon name="notifications-outline"></ion-icon>
                    Bel
                    Masuk Jam Kedua</button>
                <button class="btn btn-primary d-flex justify-content-center align-items-center gap-2"
                    @click="belSelesai"><ion-icon name="notifications-outline"></ion-icon>
                    Bel
                    Selesai Diniyah</button>
                <button class="btn btn-danger shadow d-flex justify-content-center align-items-center gap-2"
                    @click="stopAllAudio"><ion-icon name="notifications-off-outline"></ion-icon>
                    Stop Semua</button>

            </div> -->
            <div class="d-flex justify-content-between gap-2">
                <button class="btn btn-primary w-100 d-flex justify-content-center align-items-center gap-2 my-3"
                    @click="sirene">Sirene
                    <ion-icon name="notifications-outline"></ion-icon></button>
                <button class="btn btn-danger w-100 d-flex justify-content-center align-items-center gap-2 my-3"
                    @click="stopAllAudio">Stop
                    <ion-icon name="notifications-outline"></ion-icon></button>

            </div>
            <div class="card">
                <div class="card-body">

                    <h5 class="fw-bold fs-6 mb-3">DINIYAH</h5>
                    <div class="d-flex gap-2 flex-wrap">
                        <button class="btn btn-primary w-100 d-flex justify-content-center align-items-center gap-2"
                            @click="belPersiapanDiniyah">Bel
                            Persiapan <ion-icon name="notifications-outline"></ion-icon></button>
                        <div class="d-flex gap-2 justify-content-between w-100">
                            <button
                                class="btn btn-primary flex-grow-1 d-flex justify-content-center align-items-center gap-2"
                                @click="belJamPertama">
                                Pertama
                                <ion-icon name="notifications-outline"></ion-icon></button>
                            <button
                                class="btn flex-grow-1 btn-primary d-flex justify-content-center align-items-center gap-2"
                                @click="belJamKedua">Kedua
                                <ion-icon name="notifications-outline"></ion-icon></button>

                        </div>
                        <button class="btn btn-primary w-100 d-flex justify-content-center align-items-center gap-2"
                            @click="belSelesai">Bel
                            Selesai <ion-icon name="notifications-outline"></ion-icon></button>
                    </div>
                </div>
            </div>
            <div class="card mt-3">
                <div class="card-body">

                    <h5 class="fw-bold fs-6 mb-3">TAKROR</h5>
                    <div class="d-flex gap-2 flex-wrap">
                        <button class="btn btn-primary w-100 d-flex justify-content-center align-items-center gap-2"
                            @click="belPersiapanTakror">Bel
                            Persiapan <ion-icon name="notifications-outline"></ion-icon></button>

                        <button class="btn btn-primary w-100 d-flex justify-content-center align-items-center gap-2"
                            @click="belTakrorDimulai">Bel
                            Takror Dimulai <ion-icon name="notifications-outline"></ion-icon></button>
                        <button class="btn btn-primary w-100 d-flex justify-content-center align-items-center gap-2"
                            @click="belTakrorSelesai">Bel
                            Selesai <ion-icon name="notifications-outline"></ion-icon></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script>
        const app = {
            bel: new Audio('bel.mp3'),
            // Takror
            persiapanTakror: new Audio('waktu/persiapan takror.wav'),
            takrorDimulai: new Audio('waktu/takror dimulai.wav'),
            takrorSelesai: new Audio('waktu/takror selesai.wav'),

            // Diniyah
            persiapanDiniyah: new Audio('waktu/persiapan diniyah.wav'),
            pertama: new Audio('waktu/jam pertama.wav'),
            kedua: new Audio('waktu/jam kedua.wav'),
            selesai: new Audio('waktu/diniyah selesai.wav'),
            myTime: null,
            sirene() {
                this.stopAllAudio()
                if (this.myTime) {
                    clearTimeout(this.myTime)
                }
                this.bel.play()
            },
            belPersiapanDiniyah() {
                this.playAudio(this.persiapanDiniyah)
            },
            belJamPertama() {
                this.playAudio(this.pertama, () => {
                    this.sirene()
                })
            },
            belJamKedua() {
                this.playAudio(this.kedua)
            },
            belSelesai() {
                this.playAudio(this.selesai)
            },

            // Takror
            belPersiapanTakror() {
                this.playAudio(this.persiapanTakror)
            },
            belTakrorDimulai() {
                this.playAudio(this.takrorDimulai, () => {
                    this.sirene()
                })
            },
            belTakrorSelesai() {
                this.playAudio(this.takrorSelesai)
            },


            playAudio(audio, callback) {
                this.stopAllAudio()
                if (this.myTime) {
                    clearTimeout(this.myTime)
                }
                this.bel.play()
                this.myTime = setTimeout(() => {
                    this.stopAllAudio();
                    audio.volume = 1;
                    audio.play()
                    if (callback) {
                        audio.addEventListener("ended", callback)
                    }
                }, 17000)

            },
            stopAllAudio() {
                this.bel.pause(); // Menghentikan audio bel
                this.bel.currentTime = 0; // Mengatur ulang posisi pemutaran audio bel

                this.persiapanDiniyah.pause(); // Menghentikan audio persiapan
                this.persiapanDiniyah.currentTime = 0; // Mengatur ulang posisi pemutaran audio persiapan

                this.pertama.pause(); // Menghentikan audio pertama
                this.pertama.currentTime = 0; // Mengatur ulang posisi pemutaran audio pertama

                this.kedua.pause(); // Menghentikan audio kedua
                this.kedua.currentTime = 0; // Mengatur ulang posisi pemutaran audio kedua

                this.selesai.pause(); // Menghentikan audio selesai
                this.selesai.currentTime = 0; // Mengatur ulang posisi pemutaran audio selesai
            }


        }
        window.addEventListener('load', function () {
            let loading = document.querySelector('#loading');
            loading.hidden = true;
        });

    </script>
</body>

</html>